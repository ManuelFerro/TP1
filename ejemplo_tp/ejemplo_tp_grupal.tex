\documentclass[10pt,a4paper]{article}

\input{AEDmacros}
\usepackage{caratula} % Version modificada para usar las macros de algo1 de ~> https://github.com/bcardiff/dc-tex


\titulo{Trabajo práctico 1: Especificación y WP}
\subtitulo{Fondo monetario común}

\fecha{\today}

\materia{Algoritmos y Estructuras de Datos (ex-algo2)}
\grupo{Grupo --}

\integrante{Chiquinho, Santiago}{490/23}{santichiquinho@gmail.com}
\integrante{Brucellaria, Tomas}{287/23}{tomasbrus54@gmail.com}
\integrante{Caetano, Franco}{351/23}{francocaetano20@gmail.com}
\integrante{Ferro, Manuel}{405/23}{manu.ferro.13@gmail.com}
% Pongan cuantos integrantes quieran

% Declaramos donde van a estar las figuras
% No es obligatorio, pero suele ser comodo
\graphicspath{{../static/}}

\begin{document}

\maketitle

\section{Especificación}

\subsection{Problema 1:}

\begin{proc}{redistribucionDeLosFrutos:}{\In paramIn : \nat, \Inout paramInout : \TLista{\ent}}{tipoRes}
	%    \modifica{parametro1, parametro2,..}
	\requiere{expresionBooleana1}
	\asegura{expresionBooleana2}
	\aux{auxiliar1}{parametros}{tipoRes}{expresion}
	\pred{pred1}{parametros}{expresion} 
\end{proc}

\subsection{Problema 2:}

\begin{proc}{trayectoriaDeLosFrutosIndividualesALargoPlazo}
	{\Inout trayectorias: \TLista{\TLista{\float}}, \In cooperan: \TLista{\bool}, \In apuestas: \TLista{\TLista{\float}},
	 \In pagos: \TLista{\TLista{\float}}, \In eventos: \TLista{\TLista{\nat}}}

	\requiere{
		\longitud[trayectorias] = \longitud[cooperan] = \longitud[apuestas] = \longitud[pagos] = \longitud[eventos] \yLuego %chequeo si las listas trabajan el mismo grupo de individuos

		mismoGrupoDeEventos(apuestas, pagos) \yLuego %chequeo si ambas refieren al mismo grupo de posibles eventos

		igualCantidadDeEventosPorIndividuo(eventos) \yLuego %chequeo que cada individuo haya vivido la misma cantidad de eventos

		apuestasPositivas(apuestas) \yLuego %chequeo que todos los pagos sean positivos, igual que todas las apuestas

		todoelRecursofueApostado(apuestas) \yLuego %chequeo que las apuestas sumadas sean el 100% de los recursos del individuo

		trayectoriasInicialesCorrectas(trayectorias) %chequeo que trayectorias esta en "estado incial", y que son todas positivas
		}
 
	\asegura{
		PagoApuestaCorrecto(trayectorias, apuestas, pagos, eventos) \yLuego
		PagoPozoCorrecto(trayectorias, cooperan) \yLuego
		\paraTodo[unalinea]{i}{\ent}{
			0 $\leq$ i $<$ \longitud[eventos] \implicaLuego \longitud[trayectorias[i]] = \longitud[eventos[i]] + 1
		 	%chequeo que al final cada trayectoria mida 1 más que la lista de eventos
		}}

	\pred{mismoGrupoDeEventos}{apuestas, pagos}
	{\paraTodo[unalinea]{i}{\ent}{
		0 $\leq$ i $<$ \longitud[pagos] \implicaLuego \longitud[apuestas][i] = \longitud[pagos][i]}
	}
	\pred{igualCantidadDeEventosPorIndividuo}{eventos}
	{\paraTodo[unalinea]{i,j}{\ent}{
		0 $\leq$ i,j $<$ \longitud[eventos] \implicaLuego \longitud[eventos][i] = \longitud[eventos][j]}
	}
	\pred{apuestasPositivas}{apuestas}
	{\paraTodo[unalinea]{i,j}{\ent}{
		(0 $\leq$ i $<$ \longitud[apuestas] \yLuego 0 $\leq$ j $<$ apuestas[i]) \implicaLuego apuestas[i][j] $>$ 0}
	}
	\aux{todoelRecursofueApostado}{apuestas}{\ent}
	{\paraTodo[unalinea]{i,j}{\ent}{
		(0 $\leq$ i $<$ \longitud[apuestas] \yLuego 0 $\leq$ j $<$ apuestas[i]) \implicaLuego (\sum\limits_{n=0}^{j} [apuestas][i][n])}
	}
	\pred{trayectoriasInicialesCorrectas}{trayectorias}
	{\paraTodo[unalinea]{i}{\ent}{
		(0 $\leq$ i $<$ \longitud[trayectorias]) \implicaLuego ((\longitud[trayectorias[i]] = 1) \yLuego ((\cab)[trayectorias[i]] $>$ 0))}} 
	
	\pred{PagoApuestaCorrecto}{trayectorias, apuestas, pagos, eventos}
		{\paraTodo[unalinea]{i,j}{\ent}{
			((0 $\leq$ i $<$ \longitud[trayectorias]) \yLuego (1 $\leq$ j $<$ \longitud[trayectorias[i]])) \implicaLuego %acomodo los índices
	 		(trayectorias[i][j] = trayectorias[i][j - 1]*apuestas[i][eventos[i][j - 1]]*pagos[i][eventos[i][j - 1]])
	 	}
		}%chequeo que el recurso del i-esimo jugador a tiempo j sea su anterior multiplicado por la apuesta y el pago que correspondan

	\pred{PagoPozoCorrecto}{trayectorias, cooperan}
		{\paraTodo[unalinea]{i,j}{\ent}{ ((0 $\leq$ i $<$ \longitud[trayectorias]) \yLuego (1 $\leq$ j $<$ \longitud[trayectorias[i]])) \implicaLuego
			\IfThenElse{cooperan[i] = True}
				{trayectorias[i][j] = redistribucionDeLosFrutos (recursosATiempoJ(trayectorias, j)[i], cooperan)[i]}
				{trayectorias[i][j] = redistribucionDeLosFrutos (recursosATiempoJ(trayectorias, j)[i], cooperan)[i] + trayectorias[i][j - 1]}
		}
		}%chequeo que el recurso del i-esimo jugador a tiempo j se corresponda con su pago del pozo

	\aux{recursosATiempoJ}{trayectorias, j}{\TLista{\float}}
	{\paraTodo[unalinea]{i}{\ent}{
		(0 $\leq$ i $<$ \longitud[trayectorias]) \implicaLuego 
		(res[i] = trayectorias[i][j]) 
	}}%arma una lista de los recursos de los jugadores a tiempo j

\end{proc}

\subsection{Problema 3:}

\begin{proc}{trayectoriaExtrañaEscalera:}{\In trayectoria : \TLista{\float}}{\bool}

	\requiere{\longitud[trayectoria] $\geq$ 3} %la función de longitud no printea bien, preguntar
	\asegura{\res = \True \Iff (( \exists ! i \in[1,\longitud[trayectoria]-2]): (trayectoria[i] > trayectoria [i-1] \yLuego trayectoria [i] > trayectoria [i+1] ))}
\end{proc}

\subsection{Problema 4:}

\begin{proc}{individuoDecideSiCooperarONo:}{\In paramIn : \nat, \Inout paramInout : \TLista{\ent}}{tipoRes}

	\requiere{expresionBooleana1}
	\asegura{expresionBooleana2}
	\aux{auxiliar1}{parametros}{tipoRes}{expresion}
	\pred{pred1}{parametros}{expresion} 
\end{proc}

\subsection{Problema 5:}

\begin{proc}{individuoActualizaApuesta:}
	{\In individuo: \nat, \In recursos: \TLista{\float}, \In cooperan: \TLista{\bool}, \Inout apuestas: \TLista{\TLista{\float}},
	 \In pagos: \TLista{\TLista{\float}}, \In eventos: \TLista{\TLista{\nat}}}

	\requiere{
		\longitud[recursos] = \longitud[cooperan] = \longitud[apuestas] = \longitud[pagos] = \longitud[eventos] \yLuego
		todoPositivo() \yLuego
		mismoGrupoDeEventos(apuestas, pagos) \yLuego
		todoelRecursofueApostado(apuestas) \yLuego	
		0 $\leq$ individuo $<$ \longitud[apuestas]}
	\asegura{RecursosFinales(individuo, recursos, apuestas, pagos, eventos) $\geq$ RecursosFinales(individuo, recursos, apuestas, pagos, eventos)}
	%se supone que apuestas ya está modificado, sino es así preguntar cómo se indica eso

	\aux{RecursosFinales}{individuo, recursos, apuestas, pagos, eventos}{\float}
	{recursos[individuo]*(\prod_{n=0}^{\longitud[eventos[individuo]] - 1} [pagos][individuo][eventos[individuo][n]]*[apuestas][individuo][eventos[individuo][n]])}
	\pred{pred1}{parametros}{expresion} 
\end{proc}

\subsection{Auxiliares de Especificación:}

\aux{auxiliarSuelto}{parametros}{tipoRes}{expresion}
% \paraTodo{variable}{tipo}{expresion}
% \existe{variable}{tipo}{expresion}
% Pueden tener [unalinea] para que no se divida en varias lineas
\pred{predSuelto}{parametros}{\paraTodo[unalinea]{variable}{tipo}{algo \implicaLuego expresion}}
\pred{predSuelto}{parametros}{\existe[unalinea]{variable}{tipo}{algo \yLuego expresion}}

\section{Demostraciones de correctitud}
%demostrar que el programa frutoDelTrabajoPuramenteIndividual
%es correcto respecto de su espeficifación (en la consigna)
%Se hace con wp
\end{document}
